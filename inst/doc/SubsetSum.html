<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="Joseph Wood" />


<title>Attacking Problems Related to the Subset Sum Problem</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Attacking Problems Related to the Subset Sum Problem</h1>
<h4 class="author">Joseph Wood</h4>
<h4 class="date">1/21/2019</h4>


<div id="TOC">
<ul>
<li><a href="#building-on-integer-partitions">Building on Integer Partitions</a>
<ul>
<li><a href="#working-with-negative-numbers">Working with Negative Numbers</a></li>
</ul></li>
<li><a href="#partitions-with-no-restrictions">Partitions with no Restrictions</a></li>
<li><a href="#taming-floating-point-numbers">Taming Floating Point Numbers</a></li>
<li><a href="#prod-and-mean"><code>prod</code> and <code>mean</code></a></li>
</ul>
</div>

<p>This document covers the topic of solving problems related to the <a href="https://en.wikipedia.org/wiki/Subset_sum_problem">subset sum problem</a> with <code>RcppAlgos</code>. We have already covered integer partitions, which is a special case of the subset sum problem, in <a href="https://jwood000.github.io/RcppAlgos/articles/CombPermConstraints.html#integer-partitions">Constraints, Integer Partitions, and Compositions</a> and it is highly encouraged to read that vignette first.</p>
<hr />
<div id="building-on-integer-partitions" class="section level2">
<h2>Building on Integer Partitions</h2>
<p>The <a href="https://en.wikipedia.org/wiki/Partition_(number_theory)">integer partition problem</a> presents the question <em>“how can we write n as a sum of positive integers?”</em> There are well-known algorithms for enumerating <em>all</em> partitions of an integer <em>n</em>. We even have algorithms for generating partitions of a specific length or with distinct parts only. But how do we enumerate partitions of <em>n</em> with a specific set of numbers? What about enumerating partitions of a specific length <em>m</em> of <em>n</em> given a specific set of numbers?</p>
<p>For example, using only the numbers <code>3:18</code>, find all partitions of <code>50</code> of length <code>5</code>.</p>
<p>With <code>RcppAlgos</code>, this is easily achieved. We simply use the same template as we did in <a href="https://jwood000.github.io/RcppAlgos/articles/CombPermConstraints.html#integer-partitions">Constraints, Integer Partitions, and Compositions</a>. Observe (We continue to use the <code>ht</code> function defined in the <a href="https://jwood000.github.io/RcppAlgos/articles/GeneralCombinatorics.html">Combination and Permutation Basics</a> vignette) :</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Each element can only occur once</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">comboGeneral</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">18</span>, <span class="dv">5</span>, <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, <span class="at">limitConstraints =</span> <span class="dv">50</span>))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">8</span>   <span class="dv">17</span>   <span class="dv">18</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">9</span>   <span class="dv">16</span>   <span class="dv">18</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">3</span>    <span class="dv">4</span>   <span class="dv">10</span>   <span class="dv">15</span>   <span class="dv">18</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">3</span>    <span class="dv">4</span>   <span class="dv">10</span>   <span class="dv">16</span>   <span class="dv">17</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">3</span>    <span class="dv">4</span>   <span class="dv">11</span>   <span class="dv">14</span>   <span class="dv">18</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>       [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">180</span>,]    <span class="dv">7</span>    <span class="dv">8</span>    <span class="dv">9</span>   <span class="dv">12</span>   <span class="dv">14</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">181</span>,]    <span class="dv">7</span>    <span class="dv">8</span>   <span class="dv">10</span>   <span class="dv">11</span>   <span class="dv">14</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">182</span>,]    <span class="dv">7</span>    <span class="dv">8</span>   <span class="dv">10</span>   <span class="dv">12</span>   <span class="dv">13</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">183</span>,]    <span class="dv">7</span>    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">11</span>   <span class="dv">13</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">184</span>,]    <span class="dv">8</span>    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">11</span>   <span class="dv">12</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="do">## What about allowing repetition?</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">comboGeneral</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">18</span>, <span class="dv">5</span>, <span class="cn">TRUE</span>, <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, <span class="at">limitConstraints =</span> <span class="dv">50</span>))</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">3</span>    <span class="dv">3</span>    <span class="dv">8</span>   <span class="dv">18</span>   <span class="dv">18</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">3</span>    <span class="dv">3</span>    <span class="dv">9</span>   <span class="dv">17</span>   <span class="dv">18</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">3</span>    <span class="dv">3</span>   <span class="dv">10</span>   <span class="dv">16</span>   <span class="dv">18</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">3</span>    <span class="dv">3</span>   <span class="dv">10</span>   <span class="dv">17</span>   <span class="dv">17</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">3</span>    <span class="dv">3</span>   <span class="dv">11</span>   <span class="dv">15</span>   <span class="dv">18</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>       [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>[<span class="dv">507</span>,]    <span class="dv">9</span>    <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">11</span>   <span class="dv">12</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>[<span class="dv">508</span>,]    <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">12</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>[<span class="dv">509</span>,]    <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">11</span>   <span class="dv">11</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>[<span class="dv">510</span>,]    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">11</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>[<span class="dv">511</span>,]   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">10</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="do">## Even works on multisets</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(<span class="fu">comboGeneral</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">18</span>, <span class="dv">5</span>, <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">4</span>), <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>                <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, <span class="at">limitConstraints =</span> <span class="dv">50</span>))</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">7</span>   <span class="dv">18</span>   <span class="dv">18</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">8</span>   <span class="dv">17</span>   <span class="dv">18</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">9</span>   <span class="dv">16</span>   <span class="dv">18</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]    <span class="dv">3</span>    <span class="dv">4</span>    <span class="dv">9</span>   <span class="dv">17</span>   <span class="dv">17</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]    <span class="dv">3</span>    <span class="dv">4</span>   <span class="dv">10</span>   <span class="dv">15</span>   <span class="dv">18</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>       [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>[<span class="dv">401</span>,]    <span class="dv">8</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">12</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>[<span class="dv">402</span>,]    <span class="dv">9</span>    <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">13</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>[<span class="dv">403</span>,]    <span class="dv">9</span>    <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">11</span>   <span class="dv">12</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>[<span class="dv">404</span>,]    <span class="dv">9</span>    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">12</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>[<span class="dv">405</span>,]    <span class="dv">9</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">10</span>   <span class="dv">11</span></span></code></pre></div>
<p>In fact, these optimized algorithms can be applied when the vector passed has the quality that if you were to sort them, the difference of each element with it’s neighbor is constant (E.g. <code>c(121, 126, 131, 136, ..., 221)</code>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(genParts <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(<span class="fu">seq</span>(<span class="dv">121</span>, <span class="dv">221</span>, <span class="dv">5</span>), <span class="dv">13</span>, <span class="cn">TRUE</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">limitConstraints =</span> <span class="dv">2613</span>))</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a> user  system elapsed     </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fl">0.015</span>   <span class="fl">0.001</span>   <span class="fl">0.016</span>    <span class="do">## over 100 thousand results out of a possible 573 million</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(genParts)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>] [,<span class="dv">13</span>]</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]  <span class="dv">121</span>  <span class="dv">121</span>  <span class="dv">161</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]  <span class="dv">121</span>  <span class="dv">121</span>  <span class="dv">166</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]  <span class="dv">121</span>  <span class="dv">121</span>  <span class="dv">171</span>  <span class="dv">211</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]  <span class="dv">121</span>  <span class="dv">121</span>  <span class="dv">171</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]  <span class="dv">121</span>  <span class="dv">121</span>  <span class="dv">176</span>  <span class="dv">206</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>          [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>] [,<span class="dv">13</span>]</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">119542</span>,]  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">206</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>[<span class="dv">119543</span>,]  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">211</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">119544</span>,]  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">206</span>   <span class="dv">206</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">119545</span>,]  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">206</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">119546</span>,]  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">prettyNum</span>(<span class="fu">comboCount</span>(<span class="fu">seq</span>(<span class="dv">121</span>, <span class="dv">221</span>, <span class="dv">5</span>), <span class="dv">13</span>, <span class="cn">TRUE</span>), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;573,166,440&quot;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(genMultiParts <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(<span class="fu">seq</span>(<span class="dv">121</span>, <span class="dv">221</span>, <span class="dv">5</span>), <span class="dv">13</span>,</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">3</span>),</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, </span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, </span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">limitConstraints =</span> <span class="dv">2613</span>))</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="fl">0.011</span>   <span class="fl">0.000</span>   <span class="fl">0.012</span>    <span class="do">## over 70 thousand results out of a possible 256 million!</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(genMultiParts)</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>] [,<span class="dv">13</span>]</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]  <span class="dv">121</span>  <span class="dv">126</span>  <span class="dv">171</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]  <span class="dv">121</span>  <span class="dv">126</span>  <span class="dv">176</span>  <span class="dv">211</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]  <span class="dv">121</span>  <span class="dv">126</span>  <span class="dv">176</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]  <span class="dv">121</span>  <span class="dv">126</span>  <span class="dv">181</span>  <span class="dv">206</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]  <span class="dv">121</span>  <span class="dv">126</span>  <span class="dv">181</span>  <span class="dv">211</span>  <span class="dv">211</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>] [,<span class="dv">13</span>]</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>[<span class="dv">70291</span>,]  <span class="dv">186</span>  <span class="dv">186</span>  <span class="dv">191</span>  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">206</span>  <span class="dv">206</span>   <span class="dv">211</span>   <span class="dv">211</span>   <span class="dv">211</span>   <span class="dv">211</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>[<span class="dv">70292</span>,]  <span class="dv">186</span>  <span class="dv">186</span>  <span class="dv">191</span>  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">206</span>  <span class="dv">206</span>  <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">211</span>   <span class="dv">211</span>   <span class="dv">211</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>[<span class="dv">70293</span>,]  <span class="dv">186</span>  <span class="dv">186</span>  <span class="dv">191</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">206</span>  <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">211</span>   <span class="dv">216</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>[<span class="dv">70294</span>,]  <span class="dv">186</span>  <span class="dv">186</span>  <span class="dv">191</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">206</span>  <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">211</span>   <span class="dv">211</span>   <span class="dv">211</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>[<span class="dv">70295</span>,]  <span class="dv">186</span>  <span class="dv">186</span>  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">206</span>  <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">211</span>   <span class="dv">211</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="fu">prettyNum</span>(<span class="fu">comboCount</span>(<span class="fu">seq</span>(<span class="dv">121</span>, <span class="dv">221</span>, <span class="dv">5</span>), <span class="dv">13</span>, <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">3</span>)), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;256,047,675&quot;</span></span></code></pre></div>
<div id="working-with-negative-numbers" class="section level3">
<h3>Working with Negative Numbers</h3>
<p>Generally, integer partition algorithms are restricted to positive integers. However, with the generalized partition algorithms in <code>RcppAlgos</code>, we can make light work of vectors with negative numbers (again, the sorted vector has to have the property that the difference of each element with it’s neighbor is constant).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(genDistParts <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(<span class="fu">seq</span>(<span class="sc">-</span>173L, 204L, 13L), <span class="dv">11</span>, <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, <span class="at">limitConstraints =</span> <span class="sc">-</span><span class="dv">460</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fl">0.012</span>   <span class="fl">0.001</span>   <span class="fl">0.013</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">rowSums</span>(genDistParts) <span class="sc">==</span> <span class="sc">-</span>460L)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="cn">TRUE</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>]</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="sc">-</span><span class="dv">173</span> <span class="sc">-</span><span class="dv">160</span> <span class="sc">-</span><span class="dv">147</span> <span class="sc">-</span><span class="dv">134</span> <span class="sc">-</span><span class="dv">121</span> <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">82</span>  <span class="dv">165</span>   <span class="dv">191</span>   <span class="dv">204</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="sc">-</span><span class="dv">173</span> <span class="sc">-</span><span class="dv">160</span> <span class="sc">-</span><span class="dv">147</span> <span class="sc">-</span><span class="dv">134</span> <span class="sc">-</span><span class="dv">121</span> <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">69</span>  <span class="dv">152</span>   <span class="dv">191</span>   <span class="dv">204</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="sc">-</span><span class="dv">173</span> <span class="sc">-</span><span class="dv">160</span> <span class="sc">-</span><span class="dv">147</span> <span class="sc">-</span><span class="dv">134</span> <span class="sc">-</span><span class="dv">121</span> <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">69</span>  <span class="dv">165</span>   <span class="dv">178</span>   <span class="dv">204</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="sc">-</span><span class="dv">173</span> <span class="sc">-</span><span class="dv">160</span> <span class="sc">-</span><span class="dv">147</span> <span class="sc">-</span><span class="dv">134</span> <span class="sc">-</span><span class="dv">121</span> <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">56</span>  <span class="dv">139</span>   <span class="dv">191</span>   <span class="dv">204</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="sc">-</span><span class="dv">173</span> <span class="sc">-</span><span class="dv">160</span> <span class="sc">-</span><span class="dv">147</span> <span class="sc">-</span><span class="dv">134</span> <span class="sc">-</span><span class="dv">121</span> <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">56</span>  <span class="dv">152</span>   <span class="dv">178</span>   <span class="dv">204</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>          [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>]</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">108940</span>,] <span class="sc">-</span><span class="dv">121</span> <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">82</span>  <span class="sc">-</span><span class="dv">69</span>  <span class="sc">-</span><span class="dv">56</span>  <span class="sc">-</span><span class="dv">43</span>  <span class="sc">-</span><span class="dv">30</span>  <span class="sc">-</span><span class="dv">17</span>   <span class="sc">-</span><span class="dv">4</span>    <span class="dv">22</span>    <span class="dv">48</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>[<span class="dv">108941</span>,] <span class="sc">-</span><span class="dv">121</span> <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">82</span>  <span class="sc">-</span><span class="dv">69</span>  <span class="sc">-</span><span class="dv">56</span>  <span class="sc">-</span><span class="dv">43</span>  <span class="sc">-</span><span class="dv">30</span>  <span class="sc">-</span><span class="dv">17</span>    <span class="dv">9</span>    <span class="dv">22</span>    <span class="dv">35</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">108942</span>,] <span class="sc">-</span><span class="dv">121</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">82</span>  <span class="sc">-</span><span class="dv">69</span>  <span class="sc">-</span><span class="dv">56</span>  <span class="sc">-</span><span class="dv">43</span>  <span class="sc">-</span><span class="dv">30</span>  <span class="sc">-</span><span class="dv">17</span>   <span class="sc">-</span><span class="dv">4</span>     <span class="dv">9</span>    <span class="dv">48</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">108943</span>,] <span class="sc">-</span><span class="dv">121</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">82</span>  <span class="sc">-</span><span class="dv">69</span>  <span class="sc">-</span><span class="dv">56</span>  <span class="sc">-</span><span class="dv">43</span>  <span class="sc">-</span><span class="dv">30</span>  <span class="sc">-</span><span class="dv">17</span>   <span class="sc">-</span><span class="dv">4</span>    <span class="dv">22</span>    <span class="dv">35</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">108944</span>,] <span class="sc">-</span><span class="dv">108</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">82</span>  <span class="sc">-</span><span class="dv">69</span>  <span class="sc">-</span><span class="dv">56</span>  <span class="sc">-</span><span class="dv">43</span>  <span class="sc">-</span><span class="dv">30</span>  <span class="sc">-</span><span class="dv">17</span>   <span class="sc">-</span><span class="dv">4</span>     <span class="dv">9</span>    <span class="dv">35</span></span></code></pre></div>
</div>
</div>
<div id="partitions-with-no-restrictions" class="section level2">
<h2>Partitions with no Restrictions</h2>
<p>With the examples illustrated above, we had the restriction that the sorted input vector had to have the property that the difference of each element with it’s neighbor is constant. If this requirement is broken, it only means that we cannot use a particular algorithm and we must fall back to a more general algorithm. <em>Fret not!!</em> These general algorithms are extremely efficient and very flexible. We can use them with random input vectors, random targets, as well as over ranges.</p>
<p>Let us revisit the example above but with a slight variation that breaks the requirement.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>inpVec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">116</span>, <span class="fu">seq</span>(<span class="dv">126</span>, <span class="dv">221</span>, <span class="dv">5</span>))</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Non-constant difference... The specialized algo can&#39;t be used</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span>(inpVec)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">10</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span>  <span class="dv">5</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(genParts2 <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(inpVec, <span class="dv">13</span>, <span class="cn">TRUE</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">limitConstraints =</span> <span class="dv">2613</span>))</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fl">0.097</span>   <span class="fl">0.005</span>   <span class="fl">0.103</span>  <span class="do">##  We still find over 100 thousand results out of</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                       <span class="do">##  a possible 573 million in under a second</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(genParts2)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>     [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>] [,<span class="dv">13</span>]</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,]  <span class="dv">116</span>  <span class="dv">116</span>  <span class="dv">171</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,]  <span class="dv">116</span>  <span class="dv">116</span>  <span class="dv">176</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,]  <span class="dv">116</span>  <span class="dv">116</span>  <span class="dv">181</span>  <span class="dv">211</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,]  <span class="dv">116</span>  <span class="dv">116</span>  <span class="dv">181</span>  <span class="dv">216</span>  <span class="dv">216</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,]  <span class="dv">116</span>  <span class="dv">116</span>  <span class="dv">186</span>  <span class="dv">206</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>  <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span>   <span class="dv">221</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>          [,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>] [,<span class="dv">6</span>] [,<span class="dv">7</span>] [,<span class="dv">8</span>] [,<span class="dv">9</span>] [,<span class="dv">10</span>] [,<span class="dv">11</span>] [,<span class="dv">12</span>] [,<span class="dv">13</span>]</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>[<span class="dv">118556</span>,]  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">206</span>   <span class="dv">206</span>   <span class="dv">206</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">118557</span>,]  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">211</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>[<span class="dv">118558</span>,]  <span class="dv">196</span>  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">206</span>   <span class="dv">206</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>[<span class="dv">118559</span>,]  <span class="dv">196</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">206</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">118560</span>,]  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>  <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span>   <span class="dv">201</span></span></code></pre></div>
<p>Although the above was about 7 times slower than the first example dealing with 573 million combinations (103 milliseconds vs. 16 milliseconds), we are still dealing in milliseconds!!! For reference, version <code>2.3.4</code> takes about 18 seconds to find all 118,560 solutions.</p>
<p>Here are some more exotic examples demonstrating the power of these algorithms.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>mySamp <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="sc">-</span><span class="dv">100</span><span class="sc">:</span><span class="dv">100</span>, <span class="dv">50</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(mySamp)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="sc">-</span><span class="dv">100</span>  <span class="sc">-</span><span class="dv">99</span>  <span class="sc">-</span><span class="dv">95</span>  <span class="sc">-</span><span class="dv">86</span>  <span class="sc">-</span><span class="dv">79</span>  <span class="sc">-</span><span class="dv">76</span>  <span class="sc">-</span><span class="dv">74</span>  <span class="sc">-</span><span class="dv">66</span>  <span class="sc">-</span><span class="dv">52</span>  <span class="sc">-</span><span class="dv">44</span>  <span class="sc">-</span><span class="dv">39</span>  <span class="sc">-</span><span class="dv">35</span>  <span class="sc">-</span><span class="dv">33</span>  <span class="sc">-</span><span class="dv">32</span>  <span class="sc">-</span><span class="dv">31</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>]  <span class="sc">-</span><span class="dv">23</span>  <span class="sc">-</span><span class="dv">14</span>  <span class="sc">-</span><span class="dv">13</span>  <span class="sc">-</span><span class="dv">10</span>   <span class="sc">-</span><span class="dv">6</span>   <span class="sc">-</span><span class="dv">2</span>   <span class="sc">-</span><span class="dv">1</span>    <span class="dv">1</span>   <span class="dv">15</span>   <span class="dv">26</span>   <span class="dv">35</span>   <span class="dv">36</span>   <span class="dv">37</span>   <span class="dv">38</span>   <span class="dv">43</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">31</span>]   <span class="dv">47</span>   <span class="dv">48</span>   <span class="dv">49</span>   <span class="dv">53</span>   <span class="dv">57</span>   <span class="dv">63</span>   <span class="dv">64</span>   <span class="dv">68</span>   <span class="dv">69</span>   <span class="dv">74</span>   <span class="dv">76</span>   <span class="dv">77</span>   <span class="dv">80</span>   <span class="dv">83</span>   <span class="dv">86</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">46</span>]   <span class="dv">87</span>   <span class="dv">92</span>   <span class="dv">94</span>   <span class="dv">95</span>   <span class="dv">96</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(exotic <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(mySamp, <span class="dv">8</span>, <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">10</span>),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">limitConstraints =</span> <span class="dv">496</span>))</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fl">0.284</span>   <span class="fl">0.001</span>   <span class="fl">0.285</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(exotic)</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">233083</span>      <span class="dv">8</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="do">## Over 1 billion total combinations</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="fu">prettyNum</span>(<span class="fu">comboCount</span>(mySamp, <span class="dv">8</span>, <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">10</span>)), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1,343,133,680&quot;</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="do">## Only getting a few (a thousand in this case) is much faster</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(<span class="fu">comboGeneral</span>(mySamp, <span class="dv">8</span>, <span class="at">freqs =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">10</span>),</span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>                         <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>,</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>                         <span class="at">limitConstraints =</span> <span class="dv">496</span>, <span class="at">upper =</span> <span class="fl">1e3</span>))</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a><span class="fl">0.003</span>   <span class="fl">0.000</span>   <span class="fl">0.002</span></span></code></pre></div>
<p>The function <code>permuteGeneral</code> benefits from these optimized algorithms as well. However, just as we discussed in <a href="https://jwood000.github.io/RcppAlgos/articles/CombPermConstraints.html#output-order-with-permutegeneral">Output Order with <code>permuteGeneral</code></a>, the output will not be in lexicographical order.</p>
</div>
<div id="taming-floating-point-numbers" class="section level2">
<h2>Taming Floating Point Numbers</h2>
<p>Oftentimes when working with numerical vectors, it can be hard to find combinations that sum to a particular number because of floating point errors (See <a href="https://jwood000.github.io/RcppAlgos/articles/CombPermConstraints.html#using-tolerance">Using <code>tolerance</code></a>… It is also encouraged to read <a href="https://jwood000.github.io/RcppAlgos/articles/CombPermConstraints.html#interrupt-execution-with-rcppcheckuserinterrupt">Interrupt Execution with <code>Rcpp::checkUserInterrupt</code></a>).</p>
<p>In practice, we may not need an exact match and a close approximation will suffice. For example, let’s say we have a football team of 100 players (including practice squad) and we are interested in a trade involving 6 players and a total salary of 20 million dollars. We may not be able to find 6 players whose sum of salaries is exactly 20 million, but we can find many 6 player combinations whose sum of salaries is within a tolerance of 20 million.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">22213</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>football_player_salaries <span class="ot">&lt;-</span> <span class="fl">2e7</span> <span class="sc">*</span> <span class="fu">rbeta</span>(<span class="dv">100</span>, <span class="dv">2</span>, <span class="dv">25</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(football_player_salaries)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  Min.  1st Qu.   Median     Mean  3rd Qu.     Max. </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="dv">115308</span>   <span class="dv">768338</span>  <span class="dv">1261683</span>  <span class="dv">1612271</span>  <span class="dv">1950565</span> <span class="dv">10895883</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Over 1 billion combinations... </span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="do">## An exhaustive search will not be feasible</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="fu">prettyNum</span>(<span class="fu">comboCount</span>(football_player_salaries, <span class="dv">6</span>), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;1,192,052,400&quot;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(exactly20 <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(football_player_salaries, <span class="dv">6</span>,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>,</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">limitConstraints =</span> <span class="fl">2e7</span>, <span class="at">tolerance =</span> <span class="dv">0</span>))</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="fl">3.088</span>   <span class="fl">0.011</span>   <span class="fl">3.104</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a><span class="do">## No results that equal exactly 2e7</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(exactly20)</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">0</span> <span class="dv">6</span></span></code></pre></div>
<p>What if we increase the tolerance to <code>$</code>1000 (Honestly… what’s <code>$</code>1000 when we are talking about 20 million dollars)? Our intent is to explore these options, so we take advantage of the <code>upper</code> argument in anticipation that we obtain many results that meet the criteria. If we obtain the upper bound, we decrease the tolerance (if needed) and repeat.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## N.B. This is much more efficient. Also, we set keepResults</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="do">## to TRUE so we can see the total sum of salaries.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(almost20 <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(football_player_salaries, <span class="dv">6</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">limitConstraints =</span> <span class="fl">2e7</span>, <span class="at">tolerance =</span> <span class="dv">1000</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">upper =</span> <span class="dv">1000</span>, <span class="at">keepResults =</span> <span class="cn">TRUE</span>))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fl">0.130</span>   <span class="fl">0.000</span>   <span class="fl">0.131</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(almost20)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">1000</span>    <span class="dv">6</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(almost20)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">1</span>]     [,<span class="dv">2</span>]      [,<span class="dv">3</span>]    [,<span class="dv">4</span>]    [,<span class="dv">5</span>]     [,<span class="dv">6</span>]     [,<span class="dv">7</span>]</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">115307.7</span> <span class="fl">152563.4</span>  <span class="fl">809407.9</span> <span class="dv">3163109</span> <span class="dv">4863446</span> <span class="dv">10895883</span> <span class="dv">19999717</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">115307.7</span> <span class="fl">152563.4</span> <span class="fl">1590746.9</span> <span class="dv">2381655</span> <span class="dv">4863446</span> <span class="dv">10895883</span> <span class="dv">19999602</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="fl">115307.7</span> <span class="fl">152563.4</span> <span class="fl">1669898.9</span> <span class="dv">2302265</span> <span class="dv">4863446</span> <span class="dv">10895883</span> <span class="dv">19999365</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="fl">115307.7</span> <span class="fl">152563.4</span> <span class="fl">1746659.2</span> <span class="dv">2225285</span> <span class="dv">4863446</span> <span class="dv">10895883</span> <span class="dv">19999145</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="fl">115307.7</span> <span class="fl">152563.4</span> <span class="fl">1853727.8</span> <span class="dv">2850338</span> <span class="dv">4132545</span> <span class="dv">10895883</span> <span class="dv">20000364</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            [,<span class="dv">1</span>]     [,<span class="dv">2</span>]    [,<span class="dv">3</span>]    [,<span class="dv">4</span>]    [,<span class="dv">5</span>]     [,<span class="dv">6</span>]     [,<span class="dv">7</span>]</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a> [<span class="dv">996</span>,] <span class="fl">200278.8</span> <span class="fl">550414.4</span> <span class="dv">1751652</span> <span class="dv">2984500</span> <span class="dv">3618110</span> <span class="dv">10895883</span> <span class="dv">20000838</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a> [<span class="dv">997</span>,] <span class="fl">200278.8</span> <span class="fl">550414.4</span> <span class="dv">1855829</span> <span class="dv">3163109</span> <span class="dv">3334046</span> <span class="dv">10895883</span> <span class="dv">19999560</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a> [<span class="dv">998</span>,] <span class="fl">200278.8</span> <span class="fl">550414.4</span> <span class="dv">1884764</span> <span class="dv">2850338</span> <span class="dv">3618110</span> <span class="dv">10895883</span> <span class="dv">19999788</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a> [<span class="dv">999</span>,] <span class="fl">200278.8</span> <span class="fl">550414.4</span> <span class="dv">2013884</span> <span class="dv">2850338</span> <span class="dv">3489156</span> <span class="dv">10895883</span> <span class="dv">19999953</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1000</span>,] <span class="fl">200278.8</span> <span class="fl">550414.4</span> <span class="dv">2051845</span> <span class="dv">2984500</span> <span class="dv">3316996</span> <span class="dv">10895883</span> <span class="dv">19999917</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="do">## decreasing the tolerance to $10 further we obtain 158 results</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(superClose20 <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(football_player_salaries, <span class="dv">6</span>,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">constraintFun =</span> <span class="st">&quot;sum&quot;</span>, <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>,</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">limitConstraints =</span> <span class="fl">2e7</span>, <span class="at">tolerance =</span> <span class="dv">10</span>,</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">upper =</span> <span class="dv">1000</span>, <span class="at">keepResults =</span> <span class="cn">TRUE</span>))</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="fl">2.970</span>   <span class="fl">0.006</span>   <span class="fl">2.980</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ht</span>(superClose20)</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>head <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>         [,<span class="dv">1</span>]      [,<span class="dv">2</span>]      [,<span class="dv">3</span>]    [,<span class="dv">4</span>]    [,<span class="dv">5</span>]     [,<span class="dv">6</span>]     [,<span class="dv">7</span>]</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>,] <span class="fl">115307.7</span>  <span class="fl">266606.5</span>  <span class="fl">695657.2</span> <span class="dv">3163109</span> <span class="dv">4863446</span> <span class="dv">10895883</span> <span class="dv">20000009</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>[<span class="dv">2</span>,] <span class="fl">115307.7</span> <span class="fl">1117835.0</span> <span class="fl">1318811.6</span> <span class="dv">1688714</span> <span class="dv">4863446</span> <span class="dv">10895883</span> <span class="dv">19999998</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>[<span class="dv">3</span>,] <span class="fl">152563.4</span>  <span class="fl">628078.8</span> <span class="fl">1117835.0</span> <span class="dv">3334046</span> <span class="dv">3871591</span> <span class="dv">10895883</span> <span class="dv">19999997</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>[<span class="dv">4</span>,] <span class="fl">152563.4</span>  <span class="fl">695657.2</span> <span class="fl">1635144.3</span> <span class="dv">2984500</span> <span class="dv">3636247</span> <span class="dv">10895883</span> <span class="dv">19999995</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>[<span class="dv">5</span>,] <span class="fl">200278.8</span>  <span class="fl">765448.4</span> <span class="fl">1174496.9</span> <span class="dv">1923219</span> <span class="dv">5040664</span> <span class="dv">10895883</span> <span class="dv">19999990</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="sc">--------</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>tail <span class="sc">-</span><span class="ot">-&gt;</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>          [,<span class="dv">1</span>]    [,<span class="dv">2</span>]    [,<span class="dv">3</span>]    [,<span class="dv">4</span>]    [,<span class="dv">5</span>]     [,<span class="dv">6</span>]     [,<span class="dv">7</span>]</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>[<span class="dv">154</span>,] <span class="dv">1318812</span> <span class="dv">1359188</span> <span class="dv">1512157</span> <span class="dv">1929459</span> <span class="dv">2984500</span> <span class="dv">10895883</span> <span class="dv">19999997</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>[<span class="dv">155</span>,] <span class="dv">1318812</span> <span class="dv">1371670</span> <span class="dv">1771874</span> <span class="dv">2225285</span> <span class="dv">2416482</span> <span class="dv">10895883</span> <span class="dv">20000006</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>[<span class="dv">156</span>,] <span class="dv">1338303</span> <span class="dv">1706514</span> <span class="dv">1823915</span> <span class="dv">1853728</span> <span class="dv">2381655</span> <span class="dv">10895883</span> <span class="dv">19999998</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>[<span class="dv">157</span>,] <span class="dv">1371670</span> <span class="dv">1512157</span> <span class="dv">1516215</span> <span class="dv">1853728</span> <span class="dv">2850338</span> <span class="dv">10895883</span> <span class="dv">19999990</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>[<span class="dv">158</span>,] <span class="dv">1371670</span> <span class="dv">1516215</span> <span class="dv">1635144</span> <span class="dv">2189663</span> <span class="dv">2391419</span> <span class="dv">10895883</span> <span class="dv">19999994</span></span></code></pre></div>
</div>
<div id="prod-and-mean" class="section level2">
<h2><code>prod</code> and <code>mean</code></h2>
<p>These optimized algorithms are also employed when <code>constraintFun</code> is <code>&quot;prod&quot;</code> or <code>&quot;mean&quot;</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>getAllThenFilter <span class="ot">&lt;-</span> <span class="cf">function</span>(n, m, lim) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    t <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(n, m, <span class="at">constraintFun =</span> <span class="st">&quot;prod&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    t[t[, m <span class="sc">+</span> <span class="dv">1</span>] <span class="sc">==</span> lim, <span class="sc">-</span>(m<span class="sc">+</span><span class="dv">1</span>)]</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(microbenchmark)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="fu">microbenchmark</span>(<span class="at">optimized =</span> <span class="fu">comboGeneral</span>(<span class="dv">25</span>, <span class="dv">10</span>, <span class="at">constraintFun =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>                                <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>, <span class="at">limitConstraints =</span> <span class="dv">1037836800</span>),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">brute =</span> <span class="fu">getAllThenFilter</span>(<span class="dv">25</span>, <span class="dv">10</span>, <span class="dv">1037836800</span>), <span class="at">times =</span> <span class="dv">20</span>,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">unit =</span> <span class="st">&quot;relative&quot;</span>, <span class="at">check =</span> <span class="st">&quot;equal&quot;</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>Unit<span class="sc">:</span> relative</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>      expr     min      lq    mean   median       uq      max neval</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a> optimized  <span class="fl">1.0000</span>  <span class="fl">1.0000</span>  <span class="fl">1.0000</span>  <span class="fl">1.00000</span>  <span class="fl">1.00000</span>  <span class="fl">1.00000</span>    <span class="dv">20</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>     brute <span class="fl">40.1571</span> <span class="fl">41.8612</span> <span class="fl">49.3823</span> <span class="fl">45.57399</span> <span class="fl">48.00895</span> <span class="fl">67.39401</span>    <span class="dv">20</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a><span class="do">## What about cases when brute force isn&#39;t feasible</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">101</span>)</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1000</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="fu">prettyNum</span>(<span class="fu">comboCount</span>(v, <span class="dv">100</span>), <span class="at">big.mark =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;63,850,511,926,305,130,236,698,511,142,022,274,281,262,900,693,853,331,776,286,816,221,524,376,994,750,901,948,920,974,351,797,699,894,319,420,811,933,446,197,797,592,213,357,065,053,890&quot;</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(prodAlmost100 <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(v, <span class="dv">100</span>, <span class="at">constraintFun =</span> <span class="st">&quot;prod&quot;</span>,</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>,</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">limitConstraints =</span> <span class="dv">100</span>,</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">tolerance =</span> <span class="fl">0.0001</span>, <span class="at">upper =</span> <span class="dv">20</span>))</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="fl">0.038</span>   <span class="fl">0.000</span>   <span class="fl">0.038</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(prodAlmost100)</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">20</span> <span class="dv">100</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(prodAlmost100, <span class="dv">1</span>, prod)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="fl">100.00008</span> <span class="fl">100.00003</span> <span class="fl">100.00003</span> <span class="fl">100.00006</span> <span class="fl">100.00010</span> <span class="fl">100.00000</span>  <span class="fl">99.99993</span>  <span class="fl">99.99995</span> <span class="fl">100.00002</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span>]  <span class="fl">99.99992</span> <span class="fl">100.00004</span>  <span class="fl">99.99994</span> <span class="fl">100.00002</span> <span class="fl">100.00005</span>  <span class="fl">99.99992</span>  <span class="fl">99.99996</span> <span class="fl">100.00006</span> <span class="fl">100.00003</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] <span class="fl">100.00006</span> <span class="fl">100.00002</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a><span class="do">## Showcasing mean</span></span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a><span class="fu">system.time</span>(meanAlmost1<span class="fl">.5</span> <span class="ot">&lt;-</span> <span class="fu">comboGeneral</span>(v, <span class="dv">100</span>, <span class="at">constraintFun =</span> <span class="st">&quot;mean&quot;</span>,</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">comparisonFun =</span> <span class="st">&quot;==&quot;</span>,</span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">limitConstraints =</span> <span class="fl">1.5</span>,</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">tolerance =</span> <span class="fl">0.0001</span>, <span class="at">upper =</span> <span class="dv">20</span>))</span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a> user  system elapsed </span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a><span class="fl">0.000</span>   <span class="fl">0.000</span>   <span class="fl">0.001</span></span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(meanAlmost1<span class="fl">.5</span>)</span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>]  <span class="dv">20</span> <span class="dv">100</span></span>
<span id="cb8-48"><a href="#cb8-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-49"><a href="#cb8-49" aria-hidden="true" tabindex="-1"></a><span class="fu">rowMeans</span>(meanAlmost1<span class="fl">.5</span>)</span>
<span id="cb8-50"><a href="#cb8-50" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] <span class="fl">1.499905</span> <span class="fl">1.499908</span> <span class="fl">1.499917</span> <span class="fl">1.499930</span> <span class="fl">1.499931</span> <span class="fl">1.499943</span> <span class="fl">1.499901</span> <span class="fl">1.499906</span> <span class="fl">1.499908</span> <span class="fl">1.499953</span></span>
<span id="cb8-51"><a href="#cb8-51" aria-hidden="true" tabindex="-1"></a>[<span class="dv">11</span>] <span class="fl">1.499900</span> <span class="fl">1.499903</span> <span class="fl">1.499908</span> <span class="fl">1.499909</span> <span class="fl">1.499903</span> <span class="fl">1.499908</span> <span class="fl">1.499910</span> <span class="fl">1.499911</span> <span class="fl">1.499916</span> <span class="fl">1.499917</span></span></code></pre></div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
